<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Detalhes da Vaga — Moçambique Jobs</title>
  <meta name="robots" content="noindex" />

  <!-- Estilos reutilizados do site principal para consistência -->
  <style>
    :root {
      --bg: #ffffff; --text: #0f172a; --muted: #475569; --primary: #0ea5e9;
      --primary-600: #0284c7; --card: #f8fafc; --border: #e2e8f0; --success: #10b981;
      --radius: 12px; --space-1: 8px; --space-2: 12px; --space-3: 16px; --space-4: 20px; --space-5: 24px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: var(--bg); color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      line-height: 1.6; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    a { color: var(--primary-600); text-decoration: none; }
    .wrap { max-width: 800px; margin: 0 auto; padding: var(--space-4) var(--space-3) var(--space-5); }
    .header { padding-bottom: var(--space-3); border-bottom: 1px solid var(--border); margin-bottom: var(--space-4); }
    .brand { display: flex; align-items: center; gap: var(--space-2); font-weight: 700; font-size: 20px; }
    .brand .dot { width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--success)); }
    .title { font-size: 28px; font-weight: 800; margin-bottom: var(--space-2); }
    .meta { display: flex; flex-wrap: wrap; gap: 8px 16px; color: var(--muted); font-size: 15px; margin-bottom: var(--space-4); }
    .badge {
      display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px;
      border-radius: 999px; background: #eef2ff; color: #3730a3; font-weight: 600; font-size: 13px;
    }
    .content { font-size: 16px; color: #334155; }
    .content h3 { font-size: 20px; font-weight: 700; margin-top: var(--space-4); margin-bottom: var(--space-2); }
    .content ul { padding-left: 20px; }
    .apply-button {
      display: inline-block; padding: 14px 24px; border-radius: 10px; background: var(--success);
      color: white; font-weight: 700; text-decoration: none; margin-top: var(--space-4);
    }
    .button-group {
      display: flex; flex-wrap: wrap; gap: var(--space-2); margin-top: var(--space-4);
    }
    .button-group .secondary {
      background: var(--card); color: var(--text); border: 1px solid var(--border);
    }
    .loading, .error { text-align: center; padding: var(--space-5); color: var(--muted); font-size: 18px; }
    .footer {
      padding: var(--space-4) var(--space-3); border-top: 1px solid var(--border);
      color: var(--muted); font-size: 14px; text-align: center; margin-top: var(--space-5);
    }
  </style>
</head>
<body>

  <main class="wrap" id="job-details-container">
    <!-- Conteúdo será inserido aqui -->
    <div class="loading">A carregar detalhes da vaga...</div>
  </main>

  <footer class="footer" role="contentinfo">
    <a href="JobsRedrect.html" style="font-weight: 600;">← Voltar para todas as vagas</a>
    <p style="margin-top: 16px;">© 2025 Moçambique Jobs • Transparência: sempre redirecionamos para a vaga original</p>
  </footer>

  <script>
    async function loadJobDetails() {
      const container = document.getElementById('job-details-container');
      
      // 1. Obter o ID da vaga a partir do URL (?id=...)
      const urlParams = new URLSearchParams(window.location.search);
      const jobId = parseInt(urlParams.get('id'), 10);

      if (isNaN(jobId)) {
        container.innerHTML = '<div class="error">ID da vaga inválido ou não fornecido.</div>';
        return;
      }

      try {
        // 2. Carregar o arquivo JSON com todas as vagas
        const response = await fetch('conteudo.json');
        if (!response.ok) throw new Error('Falha ao carregar o arquivo de vagas.');
        
        const allJobs = await response.json();
        
        // 3. Encontrar a vaga específica pelo ID
        const job = allJobs[jobId]; // Usamos o índice do array como ID

        if (!job) {
          container.innerHTML = '<div class="error">Vaga não encontrada. Pode ter sido removida.</div>';
          return;
        }

        // 4. Atualizar o título da página
        document.title = `${job.title} — Moçambique Jobs`;

        // 5. Construir e inserir o HTML com os detalhes da vaga
        const jobHTML = `
          <header class="header">
            <div class="brand" aria-label="Moçambique Jobs">
              <span class="dot" aria-hidden="true"></span>
              <span>Moçambique Jobs</span>
            </div>
          </header>

          <div>
            <span class="badge">${job.badge}</span>
            <h1 class="title">${job.title}</h1>
            <div class="meta">
              <span><strong>Empresa:</strong> ${job.company}</span>
              <span><strong>Local:</strong> ${job.location}</span>
              <span><strong>Contrato:</strong> ${job.contract}</span>
              <span><strong>Publicado:</strong> ${new Date(job.date).toLocaleDateString('pt-PT')}</span>
            </div>
            
            <div class="content">
              <h3>Descrição Completa</h3>
              <p>${job.description}</p>
              
              <!-- Poderíamos adicionar mais seções aqui se o JSON tivesse mais dados -->
            </div>

            <div class="button-group">
              <a href="#" class="apply-button" rel="noopener" target="_blank">Candidatar-se na Fonte Original</a>
              <a href="https://whatsapp.com/channel/0029Vb72CI01nozCnNDccH06" class="apply-button secondary" rel="noopener" target="_blank">Entrar no Grupo WhatsApp</a>
            </div>
          </div>
        `;

        container.innerHTML = jobHTML;

      } catch (error) {
        console.error('Erro ao carregar detalhes da vaga:', error);
        container.innerHTML = '<div class="error">Ocorreu um erro ao carregar os detalhes. Tente novamente.</div>';
      }
    }

    // Iniciar o carregamento ao abrir a página
    document.addEventListener('DOMContentLoaded', loadJobDetails);
  </script>
</body>
</html>